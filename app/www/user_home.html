<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, 
      maximum-scale=1, minimum-scale=1, width=device-width, 
      height=device-height, target-densitydpi=device-dpi" />
    <script src="util.js" type="text/javascript"></script>

    <!-- jquery mobile -->
    <link href="css/jquery.mobile-1.3.2.min.css" rel="stylesheet">

    <title>Room 703</title>
  </head>
  <body>
    <div id="user_home" data-role="page" data-theme="b">
      <div data-theme="a" data-role="header">
        <h3>Room 703</h3>
      </div>

      <div data-role="content">
        <!-- put page content here -->
        <div data-role="content">
            <div style="float:left;">
                <h2>Shopping List</h2>
            </div>
            <div style="float:right;">
             <a href="#" data-role="button" onclick="changePage('add.html')">+</a>
            </div>            
        </div>
        <!-- List sample 1 -->
        <div id="grocerylist">
            <div data-role="collapsible" data-collapsed="false" data-content-theme="c">
                <h3>
                    Name of grocery
                </h3>
                <ul data-inset="true">
                  <li> Number 1 </li>
                  <li> Number 2 </li>
                </ul> 
            </div>
            <div data-role="collapsible" data-collapsed="false" data-content-theme="c">
                <h3>
                    Section Header2
                </h3>
                <ul data-inset="true">
                  <li> Number 2 </li>
                </ul> 
            </div>
        </div>
      </div>
    </div>

    <!-- phonegap js -->
    <script type="text/javascript" src="phonegap.js"></script>

    <!-- util functions -->
    <script type="text/javascript" src="js/util.js"></script>

    <!-- server interface wrapper -->
    <script type="text/javascript" src="js/server-interface.js"></script>

    <!-- jquery -->
    <script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/jquery.mobile-1.3.2.min.js"></script>
    <script src="js/grocerylist.js"></script>

    <!-- GCM -->
    <script src="js/gcm.js"></script>
    <script type="text/javascript">
      $("#user_home").on("pageinit", function(event){
        /* send the GCM registration id to the server */
        gcm.sendGCMRegID();
      });
    </script>

    <!-- js -->
    <script type="text/javascript">
      /* takes in json file and reads it to update shopping list info*/
      var getList = function(jfile) { 
        /*if there is a problem, print error*/
        var scss = jfile.success;
        if (!scss) alert(jfile.error);

        var numItems = jfile.num_items; //no. items
        var item = jfile.items;
        var parent = document.getElementById('grocerylist');

        if (numItem < 1) return; //no items in list
        else {
          //update the components of each item of the shopping list
          for (var i=1; i<=numItems; i++) {
            var name = item[i].item_name;
            var price = item[i].item_price;
            var status = item[i].item_status;
            var votes = item[i].item_votes;

            /*Updating shopping list*/
            var listItem = document.createElement('div');
            listItem.setAttribute('data-role','collapsible');
            listItem.setAttribute('data-collapsed','false');
            listItem.setAttribute("data-content-theme","c");

            var itemName = document.createElement("h3");
            itemName.innerHTML = name;
            var ulItem = document.createElement("ul");
            ulItem.setAttribute("data-inset", "true");
            /*adding attribtues of item in list*/
            var itemPrice = document.createElement("li");
            itemPrice.innerHTML = "Price: $" + price;
            var itemVote = document.createElement("li");
            itemVote.innerHTML = votes;

            ulItem.innerHTML = itemPrice + itemVote;
            listItem.innerHTML = itemName + ulItem;

            parent.appendChild(listItem);

          }
          //do stuff to add to list
        }
      }
    </script>
  </body> 
</html>
